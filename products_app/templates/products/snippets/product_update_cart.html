<form method="POST" action='{% url "cart:update" %}' class="d-flex" role="search">
    {% csrf_token %}
    <input type="hidden" name="product_id" value="{{product.id}}">

    {% if in_cart %}
    <button class="btn btn-link" type="submit">Remove</button>
    {% else %}
        {% if product in cart.products.all %}
            <button class="btn btn-danger" type="submit">Remove</button>
        {% else %}
            <button class="btn btn-success" type="submit">Add to Cart</button>
        {% endif %}
    {% endif %}
</form>