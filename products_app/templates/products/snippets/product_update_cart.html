<form class="form-product-ajax" method="POST" action='{% url "cart:update" %}' data-endpoint='{% url "cart:update" %}' class="d-flex" {% if request.user.is_authenticated %}data-user='abc'{% endif %} role="search">
    {% csrf_token %}
    <input type="hidden" name="product_id" value="{{product.id}}" {% if product.is_digital %}data-is-digital="true"{% endif %}>

    <span class="submit-span">
        {% if product in cart.products.all %}
            <a href="/cart/">In cart.</a><button class="btn btn-danger" type="submit">Remove</button>
        {% else %}
            <button class="btn btn-success" type="submit">Add to Cart</button>
        {% endif %}
    </span>
</form>